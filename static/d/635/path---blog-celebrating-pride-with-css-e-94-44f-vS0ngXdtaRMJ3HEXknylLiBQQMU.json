{"data":{"site":{"siteMetadata":{"title":"Blog by Raymond Luong","subtitle":"Software Engineer in San Francisco","author":{"name":"Raymond Luong","twitter":"luongraymond"},"disqusShortname":"","url":"https://www.raymondluong.com/"}},"markdownRemark":{"id":"722604e9-485f-5a23-b755-dd93ba8b8f63","html":"<p>insert image</p>\n<p>With Pride month approaching, I want to see if I can add some pizzazz to Hippo, one of the main products I work on at Gusto. Our operations teams use Hippo internally to manage the benefits information for our customers. Each customer is represented as a company in our system and has a corresponding display page. Next to the company’s name, we display list of labels for each state that the company is in. My goal is to turn these drab state labels into a colorful rainbow.</p>\n<p>Here’s what it currently looks like.</p>\n<p>insert image</p>\n<p>My first thought is to add CSS helper classes for the different colors and use Ruby to determine when to apply each class. We currently use a Rails view with embedded ruby for the state labels. Here’s a code snippet:</p>\n<div class=\"gatsby-highlight\" data-language=\"erb\"><pre class=\"language-erb\"><code class=\"language-erb\"><span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%</span> states<span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>state<span class=\"token operator\">|</span> <span class=\"token delimiter punctuation\">%></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>label label-info state<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%=</span> state <span class=\"token delimiter punctuation\">%></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%</span> <span class=\"token keyword\">end</span> <span class=\"token delimiter punctuation\">%></span></span></code></pre></div>\n<p>We have our <code class=\"language-text\">states</code> variable which is an array of states, e.g. [‘CA’, ‘NJ’, NY’]. We loop through each state to display a span element with the label, label-info, and state classes and the state name inside the element.</p>\n<p>Let’s say we have the following CSS helper classes. Note that I’m using SASS variables (denoted by the <code class=\"language-text\">$</code>) for readability, but any color value or hex code will work.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.red</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $red <span class=\"token punctuation\">}</span><span class=\"token selector\">;\n.orange</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $orange <span class=\"token punctuation\">}</span><span class=\"token selector\">;\n.yellow</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $yellow <span class=\"token punctuation\">}</span><span class=\"token selector\">;\n.green</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $green <span class=\"token punctuation\">}</span><span class=\"token selector\">;\n.blue</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $blue <span class=\"token punctuation\">}</span><span class=\"token selector\">;\n.indigo</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $indigo <span class=\"token punctuation\">}</span><span class=\"token selector\">;\n.violet</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $violet <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ruby has a method called <code class=\"language-text\">each_with_index</code> that gives us the index of the element as the second parameter of the block. It looks like we can use the index to determine the class. For example, an index of 1 would be red, an index of 2 would be orange, and so on.</p>\n<div class=\"gatsby-highlight\" data-language=\"erb\"><pre class=\"language-erb\"><code class=\"language-erb\"><span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%</span> states<span class=\"token punctuation\">.</span>each_with_index <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>state<span class=\"token punctuation\">,</span> index<span class=\"token operator\">|</span> <span class=\"token delimiter punctuation\">%></span></span>\n  # logic here based on the index\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>label label-info state<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%=</span> state<span class=\"token punctuation\">.</span>freeze <span class=\"token delimiter punctuation\">%></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token erb language-erb\"><span class=\"token delimiter punctuation\">&lt;%</span> <span class=\"token keyword\">end</span> <span class=\"token delimiter punctuation\">%></span></span></code></pre></div>\n<p>Functionally this would work, but the more I went down this approach the more I disliked it. It feels a bit heavy handed.</p>\n<p>Fortunately, we can accomplish this rainbow <strong>entirely with CSS</strong>. CSS3 added the <code class=\"language-text\">nth-child</code> selector that allows targeting DOM elements based on their position, e.g. the first child.</p>\n<p>Let’s try this:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.state:nth-child(1n)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $red <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(2n)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $orange <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(3n)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $yellow <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(4n)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $green <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(5n)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $blue <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(6n)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $indigo <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(7n)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $violet <span class=\"token punctuation\">}</span></code></pre></div>\n<p>After refreshing the page, we get this:</p>\n<p>insert image</p>\n<p>It looks like the seven state labels are a rainbow. Great, that was straightforward!</p>\n<p>To sanity check, let’s test on a company with more than 7 states.</p>\n<img>\n<p>Hmmm, not quite right. It starts off as a rainbow but quickly diverges.</p>\n<p>I’ll pause here and give you a chance to see if you can spot the bug in my code.</p>\n<p>—</p>\n<p>Spot the issue? It’s ok if you don’t, it took me a while. Let’s step through it:</p>\n<p>The colors rendered are:</p>\n<ol>\n<li>Red</li>\n<li>Orange</li>\n<li>Yellow</li>\n<li>Green</li>\n<li>Blue</li>\n<li>Indigo</li>\n<li>Violet</li>\n<li>Green</li>\n<li>Yellow</li>\n<li>Blue</li>\n</ol>\n<p>When using <code class=\"language-text\">n</code> in a pattern passed into <code class=\"language-text\">nth-child</code>, the style applies to every element whose position matches that pattern for every positive integer or zero value. For example, looking at <code class=\"language-text\">3n</code>, passing in every positive integer or zero as <code class=\"language-text\">n</code> gives us 0, 3, 6, 9, 12, effectively every third element. </p>\n<p>How are the colors for this 10-state list determined? The first seven work as expected. The eighth element, the <code class=\"language-text\">1n</code>, <code class=\"language-text\">2n</code> and <code class=\"language-text\">4n</code> rules apply to it, but the <code class=\"language-text\">4n</code> rule is declared later in the CSS file so it wins the specificity test. The ninth and tenth element follow a similar pattern where multiple rules apply but the latest rule wins.</p>\n<p>Let’s try this again, this time reading the documentation carefully. The <code class=\"language-text\">nth-child</code> selector accepts an expression of <code class=\"language-text\">An + B</code> where <code class=\"language-text\">A</code> is the length of the repeating pattern and <code class=\"language-text\">B</code> is a shift in the pattern. For our rainbow, we have a repeating pattern of seven colors, so <code class=\"language-text\">A</code> is 7. DOM elements are 1-indexed so <code class=\"language-text\">B</code> is 1 for the first color, 2 for the second color, and so on. Putting this all together, we get:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.state:nth-child(7n+1)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $red <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(7n+2)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $orange <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(7n+3)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $yellow <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(7n+4)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $green <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(7n+5)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $blue <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(7n+6)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $indigo <span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.state:nth-child(7n+7)</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> $violet <span class=\"token punctuation\">}</span></code></pre></div>\n<p>And the final result:</p>\n<img>\n<p>Happy Pride!</p>","fields":{"tagSlugs":["/tags/css/"]},"frontmatter":{"title":"Celebrating Pride with CSS","tags":["CSS"],"date":"2019-05-23","description":"Let's make a rainbow"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/celebrating-pride-with-css/"}}